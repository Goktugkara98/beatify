<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Müzik Widget - Yeniden Yapılandırılmış</title>

    <!--
      NOT:
      Bu HTML yapısı tamamen yeniden düzenlenmiştir.
      CSS dosyalarınızdaki sınıf seçicilerini aşağıdaki yeni yapıya göre güncellemeniz gerekmektedir.
      Örneğin, '.modern-track-name-container' artık '.TrackNameLayoutContainer' olmuştur.
      Bu yapı, düzen, animasyon ve içeriği birbirinden ayırarak daha temiz bir kod tabanı sunar.
    -->
    <link rel="stylesheet" href="/static/css/spotify/widget-manager/widgets/spotify_widget_core.css">
    <link rel="stylesheet" href="/static/css/spotify/widget-manager/widgets/widget_modern/widget_modern_refactored.css"> <!-- Yeni CSS dosyanız -->
</head>
<body>
    
    <!-- 
      WidgetContainer:
      Tüm widget'ın ana sarmalayıcısı. Genel konumlandırma ve boyutlandırma burada yapılır.
    -->
    <div id="spotifyWidgetModern" class="WidgetContainer inactive"
         data-token="j5Bp8lwM6iad"
         data-endpoint-template="/spotify/api/widget-data/{TOKEN}">

        <!-- 
          BackgroundLayoutContainer:
          Arka plan elemanlarının (görsel, renk vb.) widget içindeki yerleşimini kontrol eder.
        -->
        <div class="BackgroundLayoutContainer">
            <!-- 
              AlbumArtBackgroundLayoutContainer:
              Arka plan albüm görselinin pozisyonunu belirler.
            -->
            <div class="AlbumArtBackgroundLayoutContainer">
                <!-- AlbumArtBackgroundAnimationContainer: Animasyonun başlangıç durumunu (opacity, transform vb.) tanımlar. -->
                <div class="AlbumArtBackgroundAnimationContainer" data-set="a">
                    <img id="AlbumArtBackgroundElement_a" class="AlbumArtBackgroundElement" data-set="a" src="" alt="Arka Plan A">
                </div>
                <div class="AlbumArtBackgroundAnimationContainer passive" data-set="b">
                    <img id="AlbumArtBackgroundElement_b" class="AlbumArtBackgroundElement passive" data-set="b" src="" alt="Arka Plan B">
                </div>
            </div>
            <!-- Renk Arka Planı için gelecekteki bir konteyner buraya eklenebilir. -->
            <!--
            <div class="ColorBackgroundLayoutContainer">
                <div class="ColorBackgroundAnimationContainer" data-set="a">
                    <div id="ColorBackgroundElement_a" class="ColorBackgroundElement" data-set="a"></div>
                </div>
                <div class="ColorBackgroundAnimationContainer passive" data-set="b">
                    <div id="ColorBackgroundElement_b" class="ColorBackgroundElement passive" data-set="b"></div>
                </div>
            </div>
            -->
        </div>

        <!-- 
          EffectsLayoutContainer:
          Gradyan, parçacık gibi görsel efektlerin yerleşimini kontrol eder.
        -->
        <div class="EffectsLayoutContainer">
            <div class="GradientOverlayLayoutContainer">
                <div class="GradientOverlayAnimationContainer">
                    <div class="GradientOverlayElement"></div>
                </div>
            </div>
        </div>

        <!-- 
          CoverLayoutContainer:
          Ana albüm kapak görselinin widget içindeki yerleşimini kontrol eder.
        -->
        <div class="CoverLayoutContainer">
            <div class="CoverAnimationContainer" data-set="a">
                <img id="CoverElement_a" class="CoverElement" data-set="a" src="https://placehold.co/600x600/1f2937/e5e7eb?text=Beatify" alt="Kapak A">
            </div>
            <div class="CoverAnimationContainer passive" data-set="b">
                <img id="CoverElement_b" class="CoverElement passive" data-set="b" src="" alt="Kapak B">
            </div>
        </div>

        <!-- 
          ContentLayoutContainer:
          Şarkı bilgileri, ilerleme çubuğu gibi tüm ana içeriğin yerleşimini kontrol eder.
        -->
        <div class="ContentLayoutContainer">

            <!-- TrackInfoLayoutContainer: Şarkı ve sanatçı adını bir arada gruplar ve konumlandırır. -->
            <div class="TrackInfoLayoutContainer">
                <div class="TrackNameLayoutContainer">
                    <div class="TrackNameAnimationContainer" data-set="a">
                        <h3 id="TrackNameElement_a" class="TrackNameElement" data-set="a" title="Şarkı Adı Yükleniyor..."></h3>
                    </div>
                    <div class="TrackNameAnimationContainer passive" data-set="b">
                        <h3 id="TrackNameElement_b" class="TrackNameElement passive" data-set="b" title=""></h3>
                    </div>
                </div>
                <div class="ArtistNameLayoutContainer">
                    <div class="ArtistNameAnimationContainer" data-set="a">
                        <p id="ArtistNameElement_a" class="ArtistNameElement" data-set="a"></p>
                    </div>
                    <div class="ArtistNameAnimationContainer passive" data-set="b">
                        <p id="ArtistNameElement_b" class="ArtistNameElement passive" data-set="b"></p>
                    </div>
                </div>
            </div>

            <!-- PlayerControlsLayoutContainer: İlerleme çubuğu ve zaman göstergelerini gruplar. -->
            <div class="PlayerControlsLayoutContainer">
                <div class="ProgressBarLayoutContainer">
                    <!-- Animasyon konteyneri burada doğrudan elemanın kendisi için kullanılabilir. -->
                    <div class="ProgressBarAnimationContainer">
                        <div id="ProgressBarElement_a" class="ProgressBarElement" style="width: 0%;" data-set="a"></div>
                        <!-- İlerleme çubuğu genellikle tekildir, b seti şarkı geçişi için eklenebilir. -->
                        <div id="ProgressBarElement_b" class="ProgressBarElement passive" style="width: 0%;" data-set="b"></div>
                    </div>
                </div>
                <div class="TimeDisplayLayoutContainer">
                    <div class="CurrentTimeLayoutContainer">
                        <div class="CurrentTimeAnimationContainer" data-set="a">
                            <span id="CurrentTimeElement_a" class="CurrentTimeElement" data-set="a">0:00</span>
                        </div>
                        <div class="CurrentTimeAnimationContainer passive" data-set="b">
                             <span id="CurrentTimeElement_b" class="CurrentTimeElement passive" data-set="b">0:00</span>
                        </div>
                    </div>
                    <div class="TotalTimeLayoutContainer">
                        <div class="TotalTimeAnimationContainer" data-set="a">
                            <span id="TotalTimeElement_a" class="TotalTimeElement" data-set="a">0:00</span>
                        </div>
                        <div class="TotalTimeAnimationContainer passive" data-set="b">
                            <span id="TotalTimeElement_b" class="TotalTimeElement passive" data-set="b">0:00</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ProviderBadgeLayoutContainer: Servis sağlayıcı logosunun yerleşimini kontrol eder. -->
            <div class="ProviderBadgeLayoutContainer">
                <div class="ProviderBadgeAnimationContainer" data-set="a">
                    <!-- 'spotify-active' gibi bir sınıf JS ile eklenerek logo değiştirilebilir -->
                    <div id="ProviderBadgeElement_a" class="ProviderBadgeElement spotify-active" data-set="a">
                        <img src="/static/img/icons/Spotify/Full_Logo_Green_RGB.svg" alt="Spotify" class="ProviderLogo">
                    </div>
                </div>
                 <div class="ProviderBadgeAnimationContainer passive" data-set="b">
                    <div id="ProviderBadgeElement_b" class="ProviderBadgeElement spotify-active passive" data-set="b">
                        <img src="/static/img/icons/Spotify/Full_Logo_Green_RGB.svg" alt="Spotify" class="ProviderLogo">
                    </div>
                </div>
            </div>
        </div>

        <!-- 
          ErrorMessageLayoutContainer:
          Hata mesajlarının gösterileceği alan.
        -->
        <div class="ErrorMessageLayoutContainer">
            <div id="ErrorMessageElement" class="ErrorMessageElement">
                <!-- Hata mesajı JavaScript ile buraya eklenecek -->
            </div>
        </div>
    </div>

    <!-- Backend'den gelen konfigürasyon verileri -->
    <script>
        // Bu kısım sunucu tarafından render edildiğinde dinamik olarak doldurulur.
        // window.configData = JSON.parse('{{ config|tojson|safe }}');
        // console.log('Backend config yüklendi:', window.configData);
    </script>
    <!-- Gerekli JavaScript dosyaları -->
    <script src="/static/js/spotify/widget-manager/widgets/spotify_widget_core.js"></script>
    <script src="/static/js/spotify/widget-manager/widgets/widget_modern/widget_modern.js"></script>

</body>
</html>
