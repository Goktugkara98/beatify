<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Müzik Widget - Modern</title>

    <!-- Not: Bu HTML değişikliğinden sonra CSS dosyalarınızdaki sınıf adlarını da güncellemeniz gerekecektir. -->
    <link rel="stylesheet" href="/static/css/spotify/widget-manager/widgets/spotify_widget_core.css">
    <link rel="stylesheet" href="/static/css/spotify/widget-manager/widgets/widget_modern/widget_modern.css">
    <link rel="stylesheet" href="/static/css/spotify/widget-manager/widgets/widget_modern/widget_modern_animations.css">
</head>
<body>
    <!-- Ana Widget sarmalayıcısı. 'modern-widget' tema stilini, 'widget-inactive' ise başlangıç durumunu belirtir. -->
    <div id="spotifyWidgetModern" class="modern-widget widget-inactive"
         data-token="j5Bp8lwM6iad"
         data-endpoint-template="/spotify/api/widget-data/{TOKEN}">

        <!-- Arka plan görselini veya rengini içeren layout container'ı. -->
        <div class="modern-background-container">
            <!-- 'widget-background-image' sınıfı, bir resim veya sadece bir renk katmanı olabileceği için daha genel bir isimdir. -->
            <img id="albumArtBackground_a" class="widget-background-image" data-set="a" data-type="albumArtBackground"
                 src="https://placehold.co/600x600/121212/e5e7eb?text=Beatify+BG" alt="Arka Plan Görseli A">
            <img id="albumArtBackground_b" class="widget-background-image passive" data-set="b" data-type="albumArtBackground"
                 src="" alt="Arka Plan Görseli B">
        </div>

        <!-- Gradyan gibi görsel efektler için layout container'ı. -->
        <div class="modern-effects-container">
            <div class="widget-gradient-overlay"></div>
        </div>

        <!-- Ana kapak görseli için layout container'ı. -->
        <div class="modern-cover-container">
            <!-- 'widget-cover-art', albüm kapağı gibi spesifik bir ifadeden daha esnektir. -->
            <img id="albumArt_a" class="widget-cover-art" data-set="a" data-type="albumArt" src="https://placehold.co/600x360/1f2937/e5e7eb?text=Beatify" alt="Kapak Görseli A">
            <img id="albumArt_b" class="widget-cover-art passive" data-set="b" data-type="albumArt" src="" alt="Kapak Görseli B">
        </div>

        <!-- Şarkı bilgileri, ilerleme çubuğu gibi ana içeriği barındıran layout container'ı. -->
        <div id="widgetContent" class="modern-content-container">
            
            <!-- Şarkı ve sanatçı bilgileri için layout container'ı. -->
            <div class="modern-track-info-container">
                <div class="modern-track-name-container">
                    <h3 id="trackName_a" class="widget-track-name" data-set="a" data-type="trackName" title="Şarkı Adı Yükleniyor...">Yükleniyor...</h3>
                    <h3 id="trackName_b" class="widget-track-name passive" data-set="b" data-type="trackName" title=""></h3>
                </div>
                <div class="modern-artist-name-container">
                    <p id="artistName_a" class="widget-artist-name" data-set="a" data-type="artistName"></p>
                    <p id="artistName_b" class="widget-artist-name passive" data-set="b" data-type="artistName"></p>
                </div>
            </div>

            <!-- Medya oynatıcı kontrolleri için genel layout container'ı. -->
            <div class="modern-player-controls-container">
                <div class="modern-progress-bar-container">
                    <div id="progressBar_a" class="widget-progress-bar" style="width: 0%;" data-set="a" data-type="progressBar"></div>
                    <div id="progressBar_b" class="widget-progress-bar passive" style="width: 0%;" data-set="b" data-type="progressBar"></div>
                </div>
                <div class="modern-time-display-container">
                    <div class="modern-time-current-container">
                        <span id="currentTime_a" class="widget-time-current" data-set="a" data-type="currentTime">0:00</span>
                        <span id="currentTime_b" class="widget-time-current passive" data-set="b" data-type="currentTime">0:00</span>
                    </div>
                    <div class="modern-time-total-container">
                        <span id="totalTime_a" class="widget-time-total" data-set="a" data-type="totalTime">0:00</span>
                        <span id="totalTime_b" class="widget-time-total passive" data-set="b" data-type="totalTime">0:00</span>
                    </div>
                </div>
            </div>

            <!-- Servis sağlayıcı logosu için layout container'ı. (Örn: Spotify, YouTube Music) -->
            <div class="modern-badge-container">
                <!-- Buradaki 'widget-provider-logo-spotify' sınıfı, hangi platformun aktif olduğunu belirtmek için kullanılabilir. -->
                <div class="widget-provider-logo widget-provider-logo-spotify" data-set="a" data-type="spotifyLogo">
                    <div class="widget-provider-logo-box">
                        <img src="/static/img/icons/Spotify/Full_Logo_Green_RGB.svg" alt="Spotify" class="spotify-logo">
                    </div>
                </div>
                <div class="widget-provider-logo widget-provider-logo-spotify passive" data-set="b" data-type="spotifyLogo">
                    <div class="widget-provider-logo-box">
                        <img src="/static/img/icons/Spotify/Full_Logo_Green_RGB.svg" alt="Spotify" class="spotify-logo">
                    </div>
                </div>
            </div>
        </div>

        <!-- Hata mesajları için element. 'core-' yerine 'widget-' standardına uyarlandı. -->
        <div id="errorMessage" class="widget-error-message">
            <!-- Mesaj JS ile doldurulacak -->
        </div>
    </div>

    <!-- Test/Kontrol Butonları -->
    <div style="position: fixed; bottom: 10px; right: 10px; z-index: 9999; display: hidden;">
        <button id="changeMockSongBtn" style="padding: 8px 12px; font-size: 12px; background-color: #1DB954; color: white; border: none; border-radius: 5px; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">Change Mock Song</button>
    </div>
    
    <script>
        window.configData = JSON.parse('{{ config|tojson|safe }}');
        console.log('Backend config yüklendi:', window.configData);
    </script>
    <script src="/static/js/spotify/widget-manager/widgets/spotify_widget_core.js"></script>
    <script src="/static/js/spotify/widget-manager/widgets/widget_modern/widget_modern.js"></script>
</body>
</html>