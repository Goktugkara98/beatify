{%extends "base.html"%}

{%block title%}Giriş Yap{%endblock title%}

{%block head_content%}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/login/login.css') }}">
{%endblock head_content%}

{%block content%}
<!-- content -->
 <!-- Flash Mesajlarını Göster -->
<div class="login-container">
    <div class="login-card">
        <!-- Brand/Logo Section -->
        <div class="login-brand">
            <h1>BEATIFY</h1>
            <p>Premium Müzik Deneyimi</p>
        </div>
        
        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        
        <!-- Login Form -->
        <form class="login-form" method="POST" action="{{ url_for('login') }}">
            <div class="form-group">
                <input type="text" name="username" class="form-input" placeholder="Kullanıcı Adı" required autocomplete="username">
            </div>
            <div class="form-group">
                <input type="password" name="password" class="form-input" placeholder="Şifre" required autocomplete="current-password">
            </div>
            
            <div class="form-footer">
                <label class="remember-me">
                    <input type="checkbox" name="remember">
                    <span>Beni Hatırla</span>
                </label>
                <a href="#" class="forgot-password">Şifremi Unuttum</a>
            </div>
            
            <button type="submit" class="auth-particle-button" data-colors="#1DB954,#1ED760,#FFFFFF" data-gap="3">
                <span class="auth-button-text">Giriş Yap</span>
            </button>
        </form>
        
        <!-- Footer Link -->
        <div class="login-footer">
            Hesabınız yok mu?<a href="{{ url_for('register') }}">Kayıt Olun</a>
        </div>
    </div>
</div>
{%endblock content%}

{%block scripts%}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const loginForm = document.querySelector('.login-form');
    const loginButton = document.querySelector('.auth-particle-button');
    const buttonText = document.querySelector('.auth-button-text');
    
    // Form submission with loading state
    loginForm.addEventListener('submit', function(e) {
        if (loginButton) {
            loginButton.classList.add('loading');
            // Sadece butonu devre dışı bırak, input değerleri sunucuya gitmeye devam etsin
            loginButton.disabled = true;
        }
        if (buttonText) {
            buttonText.textContent = 'Giriş yapılıyor...';
        }
    });
    
    // Enhanced form validation
    const inputs = loginForm.querySelectorAll('input[required]');
    inputs.forEach(input => {
        input.addEventListener('blur', function() {
            if (!this.value.trim()) {
                this.style.borderColor = '#dc3545';
            } else {
                this.style.borderColor = '';
            }
        });
        
        input.addEventListener('input', function() {
            if (this.style.borderColor === 'rgb(220, 53, 69)') {
                this.style.borderColor = '';
            }
        });
    });
    
    // Auto-focus first input
    const firstInput = loginForm.querySelector('input');
    if (firstInput) {
        firstInput.focus();
    }
});
</script>
{%endblock scripts%}